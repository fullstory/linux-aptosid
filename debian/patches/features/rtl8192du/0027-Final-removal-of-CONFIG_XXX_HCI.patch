From dc33b360af139492e7e3866307f781d19d3e8284 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Wed, 17 Apr 2013 17:47:50 -0500
Subject: [PATCH 027/390] Final removal of CONFIG_XXX_HCI

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_debug.c         |   4 -
 core/rtw_io.c            |  10 +-
 include/Hal8192DPhyCfg.h |  23 ----
 include/autoconf.h       |   2 -
 include/drv_types.h      |   5 -
 include/hal_intf.h       |   5 -
 include/rtl8192d_hal.h   | 307 +----------------------------------------------
 include/rtl8192d_led.h   |   8 --
 include/rtl8192d_xmit.h  |  24 ----
 include/rtw_eeprom.h     |  21 ----
 include/rtw_led.h        |  70 -----------
 include/rtw_pwrctrl.h    |  12 --
 12 files changed, 7 insertions(+), 484 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_debug.c
+++ b/drivers/staging/rtl8192du/core/rtw_debug.c
@@ -423,18 +423,14 @@ int proc_get_trx_info(char *page, char *
 
 	len += snprintf(page + len, count - len, "free_xmitbuf_cnt=%d, free_xmitframe_cnt=%d, free_ext_xmitbuf_cnt=%d, free_recvframe_cnt=%d\n",
 				pxmitpriv->free_xmitbuf_cnt, pxmitpriv->free_xmitframe_cnt,pxmitpriv->free_xmit_extbuf_cnt, precvpriv->free_recvframe_cnt);
-#ifdef CONFIG_USB_HCI
 	len += snprintf(page + len, count - len, "rx_urb_pending_cnt=%d\n", precvpriv->rx_pending_cnt);
-#endif
 
 	len += snprintf(page + len, count - len, "recvbuf_skb_alloc_fail_cnt=%d\n", precvpriv->recvbuf_skb_alloc_fail_cnt);
 	len += snprintf(page + len, count - len, "recvbuf_null_cnt=%d\n", precvpriv->recvbuf_null_cnt);
 	len += snprintf(page + len, count - len, "read_port_complete_EINPROGRESS_cnt=%d\n", precvpriv->read_port_complete_EINPROGRESS_cnt);
 	len += snprintf(page + len, count - len, "read_port_complete_other_urb_err_cnt=%d\n", precvpriv->read_port_complete_other_urb_err_cnt);
 	len += snprintf(page + len, count - len, "hw_init_completed=%d\n", padapter->hw_init_completed);
-#ifdef CONFIG_USB_HCI
 	len += snprintf(page + len, count - len, "continual_urb_error=%d\n", atomic_read(&pdvobj->continual_urb_error));
-#endif
 
 	*eof = 1;
 	return len;
--- a/drivers/staging/rtl8192du/core/rtw_io.c
+++ b/drivers/staging/rtl8192du/core/rtw_io.c
@@ -30,17 +30,9 @@ c. provides the software interface betwe
 
 Compiler Flag Option:
 
-1. CONFIG_SDIO_HCI:
-    a. USE_SYNC_IRP:  Only sync operations are provided.
-    b. USE_ASYNC_IRP:Both sync/async operations are provided.
-
-2. CONFIG_USB_HCI:
+1. default USB configuration
    a. USE_ASYNC_IRP: Both sync/async operations are provided.
 
-3. CONFIG_CFIO_HCI:
-   b. USE_SYNC_IRP: Only sync operations are provided.
-
-
 Only sync read/rtw_write_mem operations are provided.
 
 jackson@realtek.com.tw
--- a/drivers/staging/rtl8192du/include/Hal8192DPhyCfg.h
+++ b/drivers/staging/rtl8192du/include/Hal8192DPhyCfg.h
@@ -60,29 +60,6 @@
 #define IQK_Matrix_REG_NUM	8
 #define IQK_Matrix_Settings_NUM	1+24+21
 
-#ifdef CONFIG_PCI_HCI
-#define	SET_RTL8192SE_RF_SLEEP(_pAdapter)							\
-{																	\
-	u1Byte		u1bTmp;												\
-	u1bTmp = PlatformEFIORead1Byte(_pAdapter, REG_LDOV12D_CTRL);		\
-	u1bTmp |= BIT0;													\
-	PlatformEFIOWrite1Byte(_pAdapter, REG_LDOV12D_CTRL, u1bTmp);		\
-	PlatformEFIOWrite1Byte(_pAdapter, REG_SPS_OCP_CFG, 0x0);				\
-	PlatformEFIOWrite1Byte(_pAdapter, TXPAUSE, 0xFF);				\
-	PlatformEFIOWrite2Byte(_pAdapter, CMDR, 0x57FC);				\
-	delay_us(100);													\
-	PlatformEFIOWrite2Byte(_pAdapter, CMDR, 0x77FC);				\
-	PlatformEFIOWrite1Byte(_pAdapter, PHY_CCA, 0x0);				\
-	delay_us(10);													\
-	PlatformEFIOWrite2Byte(_pAdapter, CMDR, 0x37FC);				\
-	delay_us(10);													\
-	PlatformEFIOWrite2Byte(_pAdapter, CMDR, 0x77FC);				\
-	delay_us(10);													\
-	PlatformEFIOWrite2Byte(_pAdapter, CMDR, 0x57FC);				\
-}
-#endif
-
-
 /*--------------------------Define Parameters-------------------------------*/
 
 
--- a/drivers/staging/rtl8192du/include/autoconf.h
+++ b/drivers/staging/rtl8192du/include/autoconf.h
@@ -25,8 +25,6 @@
 #define RTL871X_MODULE_NAME "92DU"
 #define DRV_NAME "rtl8192du"
 
-#define CONFIG_USB_HCI	1
-
 #define CONFIG_RTL8192D	1
 
 //#define CONFIG_IOCTL_CFG80211 1
--- a/drivers/staging/rtl8192du/include/drv_types.h
+++ b/drivers/staging/rtl8192du/include/drv_types.h
@@ -214,11 +214,6 @@ struct registry_priv
 
 #define MAX_CONTINUAL_URB_ERR 4
 
-#ifdef CONFIG_SDIO_HCI
-#include <drv_types_sdio.h>
-#define INTF_DATA SDIO_DATA
-#endif
-
 #define GET_PRIMARY_ADAPTER(padapter) (((_adapter *)padapter)->dvobj->if1)
 
 #ifdef CONFIG_CONCURRENT_MODE
--- a/drivers/staging/rtl8192du/include/hal_intf.h
+++ b/drivers/staging/rtl8192du/include/hal_intf.h
@@ -24,11 +24,6 @@
 #include <osdep_service.h>
 #include <drv_types.h>
 
-#ifdef CONFIG_PCI_HCI
-#include <pci_hal.h>
-#endif
-
-
 enum RTL871X_HCI_TYPE {
 
 	RTW_SDIO,
--- a/drivers/staging/rtl8192du/include/rtl8192d_hal.h
+++ b/drivers/staging/rtl8192du/include/rtl8192d_hal.h
@@ -160,75 +160,8 @@ static u32 TargetChnl_2G[TARGET_CHNL_NUM
 };
 
 
-#ifdef CONFIG_PCI_HCI
-	#include <pci_ops.h>
-	#include "Hal8192DEHWImg.h"
+#include "Hal8192DUHWImg.h"
 
-	#define RTL819X_DEFAULT_RF_TYPE			RF_2T2R
-
-//---------------------------------------------------------------------
-//		RTL8192DE From file
-//---------------------------------------------------------------------
-	#define RTL8192D_FW_IMG						"rtl8192DE\\rtl8192dfw.bin"
-
-	#define RTL8192D_PHY_REG					"rtl8192DE\\PHY_REG.txt"
-	#define RTL8192D_PHY_REG_PG				"rtl8192DE\\PHY_REG_PG.txt"
-	#define RTL8192D_PHY_REG_MP				"rtl8192DE\\PHY_REG_MP.txt"
-
-	#define RTL8192D_AGC_TAB					"rtl8192DE\\AGC_TAB.txt"
-	#define RTL8192D_AGC_TAB_2G				"rtl8192DE\\AGC_TAB_2G.txt"
-	#define RTL8192D_AGC_TAB_5G				"rtl8192DE\\AGC_TAB_5G.txt"
-	#define RTL8192D_PHY_RADIO_A				"rtl8192DE\\radio_a.txt"
-	#define RTL8192D_PHY_RADIO_B				"rtl8192DE\\radio_b.txt"
-	#define RTL8192D_PHY_RADIO_A_intPA		"rtl8192DE\\radio_a_intPA.txt"
-	#define RTL8192D_PHY_RADIO_B_intPA		"rtl8192DE\\radio_b_intPA.txt"
-	#define RTL8192D_PHY_MACREG				"rtl8192DE\\MAC_REG.txt"
-
-//---------------------------------------------------------------------
-//		RTL8192DE From header
-//---------------------------------------------------------------------
-
-	// Fw Array
-	#define Rtl8192D_FwImageArray				Rtl8192DEFwImgArray
-
-	// MAC/BB/PHY Array
-	#define Rtl8192D_MAC_Array					Rtl8192DEMAC_2T_Array
-	#define Rtl8192D_AGCTAB_Array				Rtl8192DEAGCTAB_Array
-	#define Rtl8192D_AGCTAB_5GArray			Rtl8192DEAGCTAB_5GArray
-	#define Rtl8192D_AGCTAB_2GArray			Rtl8192DEAGCTAB_2GArray
-	#define Rtl8192D_AGCTAB_2TArray				Rtl8192DEAGCTAB_2TArray
-	#define Rtl8192D_AGCTAB_1TArray				Rtl8192DEAGCTAB_1TArray
-	#define Rtl8192D_PHY_REG_2TArray			Rtl8192DEPHY_REG_2TArray
-	#define Rtl8192D_PHY_REG_1TArray			Rtl8192DEPHY_REG_1TArray
-	#define Rtl8192D_PHY_REG_Array_PG			Rtl8192DEPHY_REG_Array_PG
-	#define Rtl8192D_PHY_REG_Array_MP			Rtl8192DEPHY_REG_Array_MP
-	#define Rtl8192D_RadioA_2TArray				Rtl8192DERadioA_2TArray
-	#define Rtl8192D_RadioA_1TArray				Rtl8192DERadioA_1TArray
-	#define Rtl8192D_RadioB_2TArray				Rtl8192DERadioB_2TArray
-	#define Rtl8192D_RadioB_1TArray				Rtl8192DERadioB_1TArray
-	#define Rtl8192D_RadioA_2T_intPAArray		Rtl8192DERadioA_2T_intPAArray
-	#define Rtl8192D_RadioB_2T_intPAArray		Rtl8192DERadioB_2T_intPAArray
-
-	// Array length
-	#define Rtl8192D_FwImageArrayLength				Rtl8192DEImgArrayLength
-	#define Rtl8192D_MAC_ArrayLength				Rtl8192DEMAC_2T_ArrayLength
-	#define Rtl8192D_AGCTAB_5GArrayLength			Rtl8192DEAGCTAB_5GArrayLength
-	#define Rtl8192D_AGCTAB_2GArrayLength			Rtl8192DEAGCTAB_2GArrayLength
-	#define Rtl8192D_AGCTAB_2TArrayLength			Rtl8192DEAGCTAB_2TArrayLength
-	#define Rtl8192D_AGCTAB_1TArrayLength			Rtl8192DEAGCTAB_1TArrayLength
-	#define Rtl8192D_AGCTAB_ArrayLength			Rtl8192DEAGCTAB_ArrayLength
-	#define Rtl8192D_PHY_REG_2TArrayLength			Rtl8192DEPHY_REG_2TArrayLength
-	#define Rtl8192D_PHY_REG_1TArrayLength			Rtl8192DEPHY_REG_1TArrayLength
-	#define Rtl8192D_PHY_REG_Array_PGLength		Rtl8192DEPHY_REG_Array_PGLength
-	#define Rtl8192D_PHY_REG_Array_MPLength		Rtl8192DEPHY_REG_Array_MPLength
-	#define Rtl8192D_RadioA_2TArrayLength			Rtl8192DERadioA_2TArrayLength
-	#define Rtl8192D_RadioB_2TArrayLength			Rtl8192DERadioB_2TArrayLength
-	#define Rtl8192D_RadioA_2T_intPAArrayLength		Rtl8192DERadioA_2T_intPAArrayLength
-	#define Rtl8192D_RadioB_2T_intPAArrayLength		Rtl8192DERadioB_2T_intPAArrayLength
-
-#elif defined(CONFIG_USB_HCI)
-
-	#include "Hal8192DUHWImg.h"
 #ifdef CONFIG_WOWLAN
 	#include "Hal8192DUHWImg_wowlan.h"
 #endif //CONFIG_WOWLAN
@@ -297,26 +230,6 @@ static u32 TargetChnl_2G[TARGET_CHNL_NUM
 	#define Rtl8192D_RadioB_2T_intPAArrayLength		Rtl8192DURadioB_2T_intPAArrayLength
 
 	// The file name "_2T" is for 92CU, "_1T"  is for 88CU. Modified by tynli. 2009.11.24.
-/*	#define Rtl819XFwImageArray					Rtl8192DUFwImgArray
-	#define Rtl819XMAC_Array					Rtl8192DUMAC_2TArray
-	#define Rtl819XAGCTAB_Array					Rtl8192DUAGCTAB_Array
-	#define Rtl819XAGCTAB_5GArray				Rtl8192DUAGCTAB_5GArray
-	#define Rtl819XAGCTAB_2GArray				Rtl8192DUAGCTAB_2GArray
-	#define Rtl819XPHY_REG_2TArray				Rtl8192DUPHY_REG_2TArray
-	#define Rtl819XPHY_REG_1TArray				Rtl8192DUPHY_REG_1TArray
-	#define Rtl819XRadioA_2TArray				Rtl8192DURadioA_2TArray
-	#define Rtl819XRadioA_1TArray				Rtl8192DURadioA_1TArray
-	#define Rtl819XRadioA_2T_intPAArray			Rtl8192DURadioA_2T_intPAArray
-	#define Rtl819XRadioB_2TArray				Rtl8192DURadioB_2TArray
-	#define Rtl819XRadioB_1TArray				Rtl8192DURadioB_1TArray
-	#define Rtl819XRadioB_2T_intPAArray			Rtl8192DURadioB_2T_intPAArray
-	#define Rtl819XPHY_REG_Array_PG				Rtl8192DUPHY_REG_Array_PG
-	#define Rtl819XPHY_REG_Array_MP				Rtl8192DUPHY_REG_Array_MP
-
-	#define Rtl819XAGCTAB_2TArray				Rtl8192DUAGCTAB_2TArray
-	#define Rtl819XAGCTAB_1TArray				Rtl8192DUAGCTAB_1TArray*/
-
-#endif
 
 #define DRVINFO_SZ	4 // unit is 8bytes
 #define PageNum_128(_Len)		(u32)(((_Len)>>7) + ((_Len)&0x7F ? 1:0))
@@ -326,11 +239,11 @@ static u32 TargetChnl_2G[TARGET_CHNL_NUM
 // By tynli. 2009.12.04.
 //
 #define IS_FW_HEADER_EXIST(_pFwHdr)	((le16_to_cpu(_pFwHdr->Signature)&0xFFF0) == 0x92C0 ||\
-									(le16_to_cpu(_pFwHdr->Signature)&0xFFF0) == 0x88C0 ||\
-									(le16_to_cpu(_pFwHdr->Signature)&0xFFFF) == 0x92D0 ||\
-									(le16_to_cpu(_pFwHdr->Signature)&0xFFFF) == 0x92D1 ||\
-									(le16_to_cpu(_pFwHdr->Signature)&0xFFFF) == 0x92D2 ||\
-									(le16_to_cpu(_pFwHdr->Signature)&0xFFFF) == 0x92D3 )
+					(le16_to_cpu(_pFwHdr->Signature)&0xFFF0) == 0x88C0 ||\
+					(le16_to_cpu(_pFwHdr->Signature)&0xFFFF) == 0x92D0 ||\
+					(le16_to_cpu(_pFwHdr->Signature)&0xFFFF) == 0x92D1 ||\
+					(le16_to_cpu(_pFwHdr->Signature)&0xFFFF) == 0x92D2 ||\
+					(le16_to_cpu(_pFwHdr->Signature)&0xFFFF) == 0x92D3 )
 
 #define FW_8192D_SIZE				0x8020 // Max FW len = 32k + 32(FW header length).
 #define FW_8192D_START_ADDRESS	0x1000
@@ -672,197 +585,6 @@ enum c2h_id_8192d {
 	MAX_C2HEVENT
 };
 
-#ifdef CONFIG_PCI_HCI
-struct hal_data_8192de
-{
-	VERSION_8192D	VersionID;
-
-	// add for 92D Phy mode/mac/Band mode
-	MACPHY_MODE_8192D	MacPhyMode92D;
-	BAND_TYPE	CurrentBandType92D;	//0:2.4G, 1:5G
-	BAND_TYPE	BandSet92D;
-	BOOLEAN		bIsVS;
-	BOOLEAN		bSupportRemoteWakeUp;
-	u8	AutoLoadStatusFor8192D;
-
-	BOOLEAN		bNOPG;
-
-	BOOLEAN       bMasterOfDMSP;
-	BOOLEAN       bSlaveOfDMSP;
-
-	u16	CustomerID;
-
-	u16	FirmwareVersion;
-	u16	FirmwareVersionRev;
-	u16	FirmwareSubVersion;
-
-	u32	IntrMask[2];
-	u32	IntrMaskToSet[2];
-
-	u32	DisabledFunctions;
-
-	//current WIFI_PHY values
-	u32	ReceiveConfig;
-	u32	TransmitConfig;
-	WIRELESS_MODE	CurrentWirelessMode;
-	HT_CHANNEL_WIDTH	CurrentChannelBW;
-	u8	CurrentChannel;
-	u8	nCur40MhzPrimeSC;// Control channel sub-carrier
-	u16	BasicRateSet;
-
-	//rf_ctrl
-	u8	rf_chip;
-	u8	rf_type;
-	u8	NumTotalRFPath;
-
-	//
-	// EEPROM setting.
-	//
-	u16	EEPROMVID;
-	u16	EEPROMDID;
-	u16	EEPROMSVID;
-	u16	EEPROMSMID;
-	u16	EEPROMChannelPlan;
-	u16	EEPROMVersion;
-
-	u8	EEPROMCustomerID;
-	u8	EEPROMBoardType;
-	u8	EEPROMRegulatory;
-
-	u8	EEPROMThermalMeter;
-
-	u8	EEPROMC9;
-	u8	EEPROMCC;
-	u8	PAMode;
-
-	u8	TxPwrLevelCck[RF_PATH_MAX][CHANNEL_MAX_NUMBER_2G];
-	u8	TxPwrLevelHT40_1S[RF_PATH_MAX][CHANNEL_MAX_NUMBER];	// For HT 40MHZ pwr
-	u8	TxPwrLevelHT40_2S[RF_PATH_MAX][CHANNEL_MAX_NUMBER];	// For HT 40MHZ pwr
-	s8	TxPwrHt20Diff[RF_PATH_MAX][CHANNEL_MAX_NUMBER];// HT 20<->40 Pwr diff
-	u8	TxPwrLegacyHtDiff[RF_PATH_MAX][CHANNEL_MAX_NUMBER];// For HT<->legacy pwr diff
-	// For power group
-	u8	PwrGroupHT20[RF_PATH_MAX][CHANNEL_MAX_NUMBER];
-	u8	PwrGroupHT40[RF_PATH_MAX][CHANNEL_MAX_NUMBER];
-
-	u8	LegacyHTTxPowerDiff;// Legacy to HT rate power diff
-
-	u8	CrystalCap;	// CrystalCap.
-
-#ifdef CONFIG_BT_COEXIST
-	struct btcoexist_priv	bt_coexist;
-#endif
-
-	// Read/write are allow for following hardware information variables
-	u8	framesync;
-	u32	framesyncC34;
-	u8	framesyncMonitor;
-	u8	DefaultInitialGain[4];
-	u8	pwrGroupCnt;
-	u32	MCSTxPowerLevelOriginalOffset[MAX_PG_GROUP][16];
-	u32	CCKTxPowerLevelOriginalOffset;
-
-	u32	AntennaTxPath;					// Antenna path Tx
-	u32	AntennaRxPath;					// Antenna path Rx
-	u8	BluetoothCoexist;
-	u8	ExternalPA;
-	u8	InternalPA5G[2];	//pathA / pathB
-
-	//u32	LedControlNum;
-	//u32	LedControlMode;
-	//u32	TxPowerTrackControl;
-	u8	b1x1RecvCombine;	// for 1T1R receive combining
-
-	u8	bCurrentTurboEDCA;
-	u32	AcParam_BE; //Original parameter for BE, use for EDCA turbo.
-
-	//vivi, for tx power tracking, 20080407
-	//u16	TSSI_13dBm;
-	//u32	Pwr_Track;
-	// The current Tx Power Level
-	u8	CurrentCckTxPwrIdx;
-	u8	CurrentOfdm24GTxPwrIdx;
-
-	BB_REGISTER_DEFINITION_T	PHYRegDef[4];	//Radio A/B/C/D
-
-	BOOLEAN		bRFPathRxEnable[4];	// We support 4 RF path now.
-
-	u32	RfRegChnlVal[2];
-
-	u8	bCckHighPower;
-
-	BOOLEAN		bPhyValueInitReady;
-
-	BOOLEAN		bTXPowerDataReadFromEEPORM;
-
-	BOOLEAN		bInSetPower;
-
-	//RDG enable
-	BOOLEAN		bRDGEnable;
-
-	BOOLEAN		bLoadIMRandIQKSettingFor2G;// True if IMR or IQK  have done  for 2.4G in scan progress
-	BOOLEAN		bNeedIQK;
-
-	BOOLEAN		bLCKInProgress;
-
-	BOOLEAN		bEarlyModeEnable;
-
-#if 1
-	IQK_MATRIX_REGS_SETTING IQKMatrixRegSetting[IQK_Matrix_Settings_NUM];
-#else
-	//regc80、regc94、regc4c、regc88、regc9c、regc14、regca0、regc1c、regc78
-	u4Byte				IQKMatrixReg[IQK_Matrix_REG_NUM];
-	IQK_MATRIX_REGS_SETTING			   IQKMatrixRegSetting[IQK_Matrix_Settings_NUM];	// 1->2G,24->5G 20M channel,21->5G 40M channel.
-#endif
-
-	//for host message to fw
-	u8	LastHMEBoxNum;
-
-	u8	fw_ractrl;
-	// Beacon function related global variable.
-	u32	RegBcnCtrlVal;
-	u8	RegTxPause;
-	u8	RegFwHwTxQCtrl;
-	u8	RegReg542;
-	u8	RegCR_1;
-
-	struct dm_priv	dmpriv;
-
-	u8	bInterruptMigration;
-
-	u8	FwRsvdPageStartOffset; //2010.06.23. Added by tynli. Reserve page start offset except beacon in TxQ.
-
-	// Add for dual MAC  0--Mac0 1--Mac1
-	u32	interfaceIndex;
-
-	u16	RegRRSR;
-
-	u16	EfuseUsedBytes;
-	u8	RTSInitRate;	 // 2010.11.24.by tynli.
-#ifdef CONFIG_P2P
-	struct P2P_PS_Offload_t	p2p_ps_offload;
-#endif //CONFIG_P2P
-};
-
-typedef struct hal_data_8192de HAL_DATA_TYPE, *PHAL_DATA_TYPE;
-
-//
-// Function disabled.
-//
-#define DF_TX_BIT		BIT0
-#define DF_RX_BIT		BIT1
-#define DF_IO_BIT		BIT2
-#define DF_IO_D3_BIT			BIT3
-
-#define RT_DF_TYPE		u32
-#define RT_DISABLE_FUNC(__pAdapter, __FuncBits) ((__pAdapter)->DisabledFunctions |= ((RT_DF_TYPE)(__FuncBits)))
-#define RT_ENABLE_FUNC(__pAdapter, __FuncBits) ((__pAdapter)->DisabledFunctions &= (~((RT_DF_TYPE)(__FuncBits))))
-#define RT_IS_FUNC_DISABLED(__pAdapter, __FuncBits) ( (__pAdapter)->DisabledFunctions & (__FuncBits) )
-
-void InterruptRecognized8192DE(PADAPTER Adapter, PRT_ISR_CONTENT pIsrContent);
-VOID UpdateInterruptMask8192DE(PADAPTER Adapter, u32 AddMSR, u32 RemoveMSR);
-#endif
-
-#ifdef CONFIG_USB_HCI
 
 //should be renamed and moved to another file
 typedef	enum _INTERFACE_SELECT_8192DUSB{
@@ -963,18 +685,11 @@ struct hal_data_8192du
 	u8	BluetoothCoexist;
 	u8	ExternalPA;
 	u8	InternalPA5G[2];	//pathA / pathB
-
-	//u32	LedControlNum;
-	//u32	LedControlMode;
-	//u32	TxPowerTrackControl;
 	u8	b1x1RecvCombine;	// for 1T1R receive combining
 
 	u8	bCurrentTurboEDCA;
 	u32	AcParam_BE; //Original parameter for BE, use for EDCA turbo.
 
-	//vivi, for tx power tracking, 20080407
-	//u16	TSSI_13dBm;
-	//u32	Pwr_Track;
 	// The current Tx Power Level
 	u8	CurrentCckTxPwrIdx;
 	u8	CurrentOfdm24GTxPwrIdx;
@@ -1003,17 +718,10 @@ struct hal_data_8192du
 
 	BOOLEAN		bEarlyModeEnable;
 
-#if 1
 	IQK_MATRIX_REGS_SETTING IQKMatrixRegSetting[IQK_Matrix_Settings_NUM];
-#else
-	//regc80、regc94、regc4c、regc88、regc9c、regc14、regca0、regc1c、regc78
-	u4Byte				IQKMatrixReg[IQK_Matrix_REG_NUM];
-	IQK_MATRIX_REGS_SETTING			   IQKMatrixRegSetting[IQK_Matrix_Settings_NUM];	// 1->2G,24->5G 20M channel,21->5G 40M channel.
-#endif
 
 	//for host message to fw
 	u8	LastHMEBoxNum;
-
 	u8	fw_ractrl;
 	// Beacon function related global variable.
 	u32	RegBcnCtrlVal;
@@ -1021,9 +729,7 @@ struct hal_data_8192du
 	u8	RegFwHwTxQCtrl;
 	u8	RegReg542;
 	u8	RegCR_1;
-
 	struct dm_priv	dmpriv;
-
 	u8	FwRsvdPageStartOffset; //2010.06.23. Added by tynli. Reserve page start offset except beacon in TxQ.
 
 	//Query RF by FW
@@ -1071,7 +777,6 @@ struct hal_data_8192du
 };
 
 typedef struct hal_data_8192du HAL_DATA_TYPE, *PHAL_DATA_TYPE;
-#endif
 
 #define GET_HAL_DATA(__pAdapter)	((HAL_DATA_TYPE *)((__pAdapter)->HalData))
 #define GET_RF_TYPE(priv)	(GET_HAL_DATA(priv)->rf_type)
--- a/drivers/staging/rtl8192du/include/rtl8192d_led.h
+++ b/drivers/staging/rtl8192du/include/rtl8192d_led.h
@@ -28,15 +28,7 @@
 //================================================================================
 // Interface to manipulate LED objects.
 //================================================================================
-#ifdef CONFIG_USB_HCI
 void rtl8192du_InitSwLeds(_adapter *padapter);
 void rtl8192du_DeInitSwLeds(_adapter *padapter);
-#endif
-
-#ifdef CONFIG_PCI_HCI
-void rtl8192de_gen_RefreshLedState(PADAPTER Adapter);
-void rtl8192de_InitSwLeds(_adapter *padapter);
-void rtl8192de_DeInitSwLeds(_adapter *padapter);
-#endif
 
 #endif
--- a/drivers/staging/rtl8192du/include/rtl8192d_xmit.h
+++ b/drivers/staging/rtl8192du/include/rtl8192d_xmit.h
@@ -92,8 +92,6 @@ void handle_txrpt_ccx_8192d(_adapter *ad
 #define handle_txrpt_ccx_8192d(adapter, buf) do {} while(0)
 #endif
 
-#ifdef CONFIG_USB_HCI
-
 #ifdef CONFIG_USB_TX_AGGREGATION
 #define MAX_TX_AGG_PACKET_NUMBER 0xFF
 #endif
@@ -115,25 +113,3 @@ s32	rtl8192du_hostap_mgnt_xmit_entry(_ad
 #endif
 
 #endif
-
-#ifdef CONFIG_PCI_HCI
-s32	rtl8192de_init_xmit_priv(_adapter * padapter);
-void	rtl8192de_free_xmit_priv(_adapter * padapter);
-
-s32	rtl8192de_enqueue_xmitbuf(struct rtw_tx_ring *ring, struct xmit_buf *pxmitbuf);
-struct xmit_buf *rtl8192de_dequeue_xmitbuf(struct rtw_tx_ring *ring);
-
-void	rtl8192de_xmitframe_resume(_adapter *padapter);
-
-s32	rtl8192de_mgnt_xmit(_adapter *padapter, struct xmit_frame *pmgntframe);
-
-s32	rtl8192de_hal_xmit(_adapter *padapter, struct xmit_frame *pxmitframe);
-
-#ifdef CONFIG_HOSTAPD_MLME
-s32	rtl8192de_hostap_mgnt_xmit_entry(_adapter *padapter, _pkt *pkt);
-#endif
-
-#endif
-
-
-#endif
--- a/drivers/staging/rtl8192du/include/rtw_eeprom.h
+++ b/drivers/staging/rtl8192du/include/rtw_eeprom.h
@@ -40,11 +40,6 @@
 #define EUROPE						0x1 //temp, should be provided later
 #define JAPAN						0x2 //temp, should be provided later
 
-#ifdef CONFIG_SDIO_HCI
-#define eeprom_cis0_sz	17
-#define eeprom_cis1_sz	50
-#endif
-
 #define	EEPROM_CID_DEFAULT			0x0
 #define	EEPROM_CID_ALPHA				0x1
 #define	EEPROM_CID_Senao				0x3
@@ -111,26 +106,10 @@ typedef enum _RT_CUSTOMER_ID
 struct eeprom_priv
 {
 	u8		bautoload_fail_flag;
-	//u8		bempty;
-	//u8		sys_config;
 	u8		mac_addr[6];	//PermanentAddress
-	//u8		config0;
 	u16		channel_plan;
-	//u8		country_string[3];
-	//u8		tx_power_b[15];
-	//u8		tx_power_g[15];
-	//u8		tx_power_a[201];
-
 	u8		EepromOrEfuse;
-
 	u8		efuse_eeprom_data[EEPROM_MAX_SIZE];
-
-#ifdef CONFIG_SDIO_HCI
-	u8		sdio_setting;
-	u32		ocr;
-	u8		cis0[eeprom_cis0_sz];
-	u8		cis1[eeprom_cis1_sz];
-#endif
 };
 
 
--- a/drivers/staging/rtl8192du/include/rtw_led.h
+++ b/drivers/staging/rtl8192du/include/rtw_led.h
@@ -43,7 +43,6 @@ typedef enum _LED_CTL_MODE{
 }LED_CTL_MODE;
 
 
-#if defined(CONFIG_USB_HCI) || defined(CONFIG_SDIO_HCI)
 //================================================================================
 // LED object.
 //================================================================================
@@ -117,75 +116,6 @@ typedef	enum _LED_STRATEGY_871x{
 	SW_LED_MODE6, //for 88CU minicard, porting from ce SW_LED_MODE7
 	HW_LED, // HW control 2 LEDs, LED0 and LED1 (there are 4 different control modes, see MAC.CONFIG1 for details.)
 }LED_STRATEGY_871x, *PLED_STRATEGY_871x;
-#endif //CONFIG_USB_HCI
-
-#ifdef CONFIG_PCI_HCI
-//================================================================================
-// LED object.
-//================================================================================
-
-typedef	enum _LED_STATE_871x{
-	LED_UNKNOWN = 0,
-	RTW_LED_ON = 1,
-	RTW_LED_OFF = 2,
-	LED_BLINK_NORMAL = 3,
-	LED_BLINK_SLOWLY = 4,
-	LED_POWER_ON_BLINK = 5,
-	LED_SCAN_BLINK = 6, // LED is blinking during scanning period, the # of times to blink is depend on time for scanning.
-	LED_NO_LINK_BLINK = 7, // LED is blinking during no link state.
-	LED_BLINK_StartToBlink = 8,
-	LED_BLINK_TXRX = 9,
-	LED_BLINK_RUNTOP = 10, // Customized for RunTop
-	LED_BLINK_CAMEO = 11,
-}LED_STATE_871x;
-
-typedef enum _LED_PIN_871x{
-	LED_PIN_GPIO0,
-	LED_PIN_LED0,
-	LED_PIN_LED1,
-	LED_PIN_LED2
-}LED_PIN_871x;
-
-typedef struct _LED_871x{
-	_adapter				*padapter;
-
-	LED_PIN_871x		LedPin;	// Identify how to implement this SW led.
-
-	LED_STATE_871x		CurrLedState; // Current LED state.
-	u8					bLedOn; // TRUE if LED is ON, FALSE if LED is OFF.
-
-	u8					bLedBlinkInProgress; // TRUE if it is blinking, FALSE o.w..
-	u8					bLedWPSBlinkInProgress; // TRUE if it is blinking, FALSE o.w..
-
-	u8					bLedSlowBlinkInProgress;//added by vivi, for led new mode
-	u32					BlinkTimes; // Number of times to toggle led state for blinking.
-	LED_STATE_871x		BlinkingLedState; // Next state for blinking, either RTW_LED_ON or RTW_LED_OFF are.
-
-	_timer				BlinkTimer; // Timer object for led blinking.
-} LED_871x, *PLED_871x;
-
-
-//================================================================================
-// LED customization.
-//================================================================================
-
-typedef	enum _LED_STRATEGY_871x{
-	SW_LED_MODE0, // SW control 1 LED via GPIO0. It is default option.
-	SW_LED_MODE1, // SW control for PCI Express
-	SW_LED_MODE2, // SW control for Cameo.
-	SW_LED_MODE3, // SW contorl for RunTop.
-	SW_LED_MODE4, // SW control for Netcore
-	SW_LED_MODE5, //added by vivi, for led new mode, DLINK
-	SW_LED_MODE6, //added by vivi, for led new mode, PRONET
-	SW_LED_MODE7, //added by chiyokolin, for Lenovo, PCI Express Minicard Spec Rev.1.2 spec
-	SW_LED_MODE8, //added by chiyokolin, for QMI
-	SW_LED_MODE9, //added by chiyokolin, for BITLAND, PCI Express Minicard Spec Rev.1.1
-	SW_LED_MODE10, //added by chiyokolin, for Edimax-ASUS
-	HW_LED, // HW control 2 LEDs, LED0 and LED1 (there are 4 different control modes)
-}LED_STRATEGY_871x, *PLED_STRATEGY_871x;
-
-#define LED_CM8_BLINK_INTERVAL		500	//for QMI
-#endif //CONFIG_PCI_HCI
 
 struct led_priv{
 	/* add for led controll */
--- a/drivers/staging/rtl8192du/include/rtw_pwrctrl.h
+++ b/drivers/staging/rtl8192du/include/rtw_pwrctrl.h
@@ -201,18 +201,6 @@ struct pwrctrl_priv
 	//RF OFF Level
 	u32	cur_ps_level;
 	u32	reg_rfps_level;
-
-
-
-#ifdef CONFIG_PCI_HCI
-	//just for PCIE ASPM
-	u8	b_support_aspm; // If it supports ASPM, Offset[560h] = 0x40, otherwise Offset[560h] = 0x00.
-	u8	b_support_backdoor;
-
-	//just for PCIE ASPM
-	u8	const_amdpci_aspm;
-#endif
-
 	uint	ips_enter_cnts;
 	uint	ips_leave_cnts;
 
